FROM ubuntu:latest

# Prepare
RUN apt-get update
RUN apt-get install --fix-missing

# Install normal Packages needed
RUN apt-get install -y  apt-utils unzip wget curl 
# Install chromedriver
RUN wget https://chromedriver.storage.googleapis.com/2.41/chromedriver_linux64.zip && \
    unzip chromedriver_linux64.zip && \
    mv chromedriver /bin/chromedriver && \
    chmod +x /bin/chromedriver && \
    rm -rf chromedriver_linux64.zip

RUN wget "https://github.com/michenriksen/aquatone/releases/download/v1.7.0/aquatone_linux_arm64_1.7.0.zip" &&\
    unzip /aquatone_linux_arm64_1.7.0.zip &&\
    mv aquatone /bin/aquatone &&\
    mkdir /data &&\
    rm -rf aquatone_linux_arm64_1.7.0.zip 
    
WORKDIR /data
# set to bash so you can set keys before running aquatone.
ENTRYPOINT ["cat $1 | aquatone --chrome-path /bin"]