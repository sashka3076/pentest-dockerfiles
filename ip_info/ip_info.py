import requests
import sys
import pprint

def main():
    if len(sys.argv) < 2:
        print("[!] no IP supplied")
        sys.exit(1)
    ip = sys.argv[1]
    api_url = f"http://ip-api.com/json/{ip}"
    resp = requests.get(api_url)
    pp = pprint.PrettyPrinter(indent=4)
    if resp.status_code is not 200:
        print("[!] Error while retrieving data from API")
        sys.exit(1)
    else:
        pp.pprint(resp.json())

if __name__ == "__main__":
    main()